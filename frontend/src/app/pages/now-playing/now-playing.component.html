<modal [modal_config]="modal_config" #modal></modal>
<h3 class="page_header">Now Playing</h3>
<div *ngIf="player_service.track" class="current_track_info">
	<div>
		<img
			src="{{ '/albums/' + player_service.track.album_id + '/image' }}"
			alt="{{ player_service.track.title + ' album cover' }}"
			class="large"
		/>
	</div>
	<div class="track_title">
		<music></music>
		{{ player_service.track.title }}
	</div>
	<div class="album_title">
		<disc></disc>
		{{ player_service.track.album }}
	</div>
	<div class="artist_name">
		<user></user>
		{{ player_service.track.artist }}
	</div>
</div>
<track-table
	*ngIf="player_service.queue.length"
	[tracks]="player_service.queue"
	[popup_menu]="popup_menu_template"
	[show_headers]="true"
></track-table>

<ng-template #popup_menu_template let-track="track">
	<popup-menu #popup_menu>
		<popup-menu-item (click)="love_this_track(track)">Love</popup-menu-item>
		<popup-menu-item [contains_submenu]="true">
			Add to a playlist
			<span class="submenu">
				<popup-menu-item (click)="add_to_playlist(track)">
					+ New Playlist
				</popup-menu-item>
				<popup-menu-item
					*ngFor="let name of playlist_service.names"
					(click)="add_to_playlist(track, name)"
				>
					{{ name }}
				</popup-menu-item>
			</span>
		</popup-menu-item>
		<popup-menu-item (click)="play_track_next(track)">Play Next</popup-menu-item>
		<popup-menu-item (click)="append_track_to_queue(track)">
			Append to Queue
		</popup-menu-item>
	</popup-menu>
</ng-template>
