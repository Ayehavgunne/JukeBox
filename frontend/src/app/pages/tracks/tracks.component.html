<modal [modal_config]="modal_config" #modal></modal>
<div *ngIf="tracks" class="tracks_container">
	<cdk-virtual-scroll-viewport itemSize="60">
		<!--		<div class="body">-->
		<div *ngIf="show_headers" class="header"></div>
		<div *ngIf="show_headers" class="header"></div>
		<div *ngIf="show_headers" class="header">No.</div>
		<div *ngIf="show_headers" class="header">Title</div>
		<div *ngIf="show_headers" class="header">Artist</div>
		<div *ngIf="show_headers" class="header">Album</div>
		<div *ngIf="show_headers" class="header">Disc</div>
		<div *ngIf="show_headers" class="header">Year</div>
		<div *ngIf="show_headers" class="header">Length</div>
		<div *cdkVirtualFor="let track of tracks" class="row">
			<div class="rel cell">
				<popup-menu>
					<popup-menu-item (click)="love_this_track(track)" [data]="track">
						Love
					</popup-menu-item>
					<popup-menu-item [data]="track" [contains_submenu]="true">
						Add to a playlist
						<span class="submenu">
							<popup-menu-item
								(click)="add_to_playlist(track)"
								[data]="track"
							>
								+ New Playlist
							</popup-menu-item>
							<popup-menu-item
								*ngFor="let name of playlist_service.names"
								(click)="add_to_playlist(track, name)"
								[data]="track"
							>
								{{ name }}
							</popup-menu-item>
						</span>
					</popup-menu-item>
					<popup-menu-item (click)="play_track_next(track)" [data]="track">
						Play Next
					</popup-menu-item>
					<popup-menu-item
						(click)="append_track_to_queue(track)"
						[data]="track"
					>
						Append to Queue
					</popup-menu-item>
				</popup-menu>
			</div>
			<div class="rel cell">
				<play [track]="track">
					<div class="play_track"></div>
					<img
						src="{{ '/albums/' + track.album_id + '/image' }}"
						alt="{{ track.title + ' album art' }}"
						class="small"
					/>
				</play>
			</div>
			<div class="number cell">{{ track.track_number }}</div>
			<div class="cell">{{ track.title }}</div>
			<div class="cell">{{ track.artist }}</div>
			<div class="cell">{{ track.album }}</div>
			<div class="number cell">{{ track.disc_number }}</div>
			<div class="number cell">{{ track.year }}</div>
			<div class="number cell">
				{{ track.length * 1000 | date: "mm:ss" }}
			</div>
		</div>
		<!--		</div>-->
	</cdk-virtual-scroll-viewport>
</div>
